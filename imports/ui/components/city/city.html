<template name="cities">
  <table cellpadding="10" class="cityTable">
    <tr >
      {{#each citySet}}
        <!-- <td class="cityRow"> -->
          {{> city}}
        <!-- </td> -->
      {{/each}}
    </tr>
  </table>
</template>

<template name="city">
  <!-- {{}} -->
  <div id="cityBox">
    <!-- <p class="cityName">{{name}} </p> -->
    <!-- <h3>Your City's Production</h3> -->

    <div class="container">
      <div class="row">
        
        <div class="col-md-2">
          <h2> Resources </h2>
        </div>
        <!-- {{#each cityResources}}
        {{this.image}}
        {{/each}} -->
        
        {{#each cr in cityResources}}
        <div class="col-sm-2 col-md-1 col-xs-4">
          <img class="cityIcon" src="{{cr.image}}">
          <h3> {{cr.amount}} </h3> <h4>{{cr.roundProduction}}</h4>
        </div>
        {{/each}}

      </div>
    </div>
     <!-- <p> -->
        
        <!-- <h5>
          Resource changes are estimates and don't always work out! <br />
          Population increases when people have enough food <br />
          Happiness increases when people have enough parks to visit
        </h5>

        <button type="button" style="max-width:400pt" class="btn btn-primary" data-container="body" data-toggle="popover" data-placement="right" data-html="true" title="Events over last round" data-content="<ul>{{#each roundNotes}} <li>{{this}} </li> {{/each}}">Notes from Last Run</button> -->

        <!-- <p>Notes from last run: {{#each roundNotes}}  <p> {{this}}  </p>  -->


      <!-- </p> -->
 

  </div>

    
  {{> cityMap}}
</template>


<template name="cityMap">
  <div class="row" style = "padding: 6pt;">
    {{#each build in boughtBuildings}}
      <div class="container boughtBuilding" style="border: solid black 1pt; padding: 2pt; margin:2pt;">
        {{build.name}}
        {{#if buildingPlacable build}}
          <button class="btn btn-primary placeBuilding" id="{{build._id}}"> Place Building </button>
        {{/if}}
        <!-- {{buildingPlacable build}} -->
    </div>
    {{/each}}
  </div>

  <table id="smallMap">
    {{#each mapRows}}
    <tr>
        {{#each this}}
        <td class="mapCell {{this.loc}}" id="{{this.loc}}">
            <!-- <img class = "mapCell {{this.loc}}" id = "mapTileimg" src = "{{this.imageSource}}" style="width:60px; height:60px;"> -->
            {{this.text}}&emsp;
        </td>
        {{/each}}
    </tr>
    {{/each}}
  </table>

  <div class="container" style="border: solid black 1pt; padding: 2pt; margin:2pt;">
    
    {{#each currentBuilding.text}}
      {{this}} <br />
    {{/each}}
    {{#if currentBuilding.buildingButtons}}
      <button class="btn btn-default toggleBuilding" id="{{currentBuilding.mapCell.building._id}}"> Toggle - {{currentBuilding.status}} </button>
      <button class="btn btn-danger removeBuilding"  id="remove-{{currentBuilding.mapCell.building._id}}"> Remove Building </button>
    {{/if}}
    <!-- {{#else}} -->
  </div>

</template>


<template name="cityFactory">
  <div class="row">
    <div class="col-md-6 col-xs-6">
      <!-- <div class="cityFactoryInner"> -->
      <img class="factoryIcon" src="{{factoryIcon}}" style="width:100%;">
      <!-- {{> factory}} -->
      <br />

      <button type="button" class="btn btn-default toggleRunning" data-toggle="button" aria-pressed="false" autocomplete="off">
        {{runningStatus}}
      </button>        
      
    </div>

    <div class="col-md-6 col-xs-6">
      <div class="productionValues">
          <span class="productionLabel">Produces</span>
          {{{CostInfo this.prodValues ""}}} 
        </div>
        <br />
        <div class="consumptionValue">
          <span class="productionLabel">Consumes</span>
          {{{CostInfo this.prodCosts ""}}}
        </div>
    </div>
        
  </div>
  
  
  <div class="cityFactoryNotes">
    <button type="button" class="btn btn-info" data-container="body" data-toggle="popover" data-placement="top" data-html="true" title="Events over last round" data-content="<ul>{{#each roundNotes}} <li>{{this}} </li> {{/each}}">Factory Log</button>
  <!-- Factory log: {{#each roundNotes}}  {{this}} <br />   {{/each}} -->
  </div>
</template>